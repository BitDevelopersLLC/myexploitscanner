# Team 4 CMSC 495 Project Repository for UMGC

This project is for our UMGC CMSC 495 Capstone Group Project


### Horizontal Rule

# Compile Instructions
## Scanner
**Make sure to modify config.json with the required db and other configurations.**
**Make sure Java SDK/JDK version 11+ is installed**

Run the following from a command line in /src path. If Linux, then replace ; with :

**Compile source code:**
```
javac -cp mysql-connector-j-8.3.0.jar;gson-2.8.5.jar exploitscanner.java
```

**Create JAR:**
```
jar cvfm exploitscanner.jar MANIFEST.MF exploitscanner.class exploitscanner$Scanner.class exploitscanner$Scanner_NMAP.class mysql-connector-j-8.3.0.jar gson-2.8.5.jar
```

**Confirm binaries in JAR:**
```
jar tf exploitscanner.jar
```

**Command to run binary:**
```
java -jar exploitscanner.jar <parameter>
```

## Scheduler
**Make sure to modify config.json with the required db and other configurations.**
**Make sure Java SDK/JDK version 11+ is installed**

Run the following from a command line in /src path. If Linux, then replace ; with :

**Compile source code:**
```
javac -cp mysql-connector-j-8.3.0.jar:gson-2.8.5.jar exploitscheduler.java
```

**Create JAR:**
```
jar cvfm exploitscheduler.jar MANIFEST.MF exploitscheduler.class mysql-connector-j-8.3.0.jar gson-2.8.5.jar
```

**Confirm binaries in JAR:**
```
jar tf exploitscheduler.jar
```

**Command to run binary:**
```
java -jar exploitscheduler.jar
```


### Horizontal Rule

## UI - Website (https://myexploitscanner.com)
The server where the software runs must have Python 3 + Flask and a few support libraries installed to run the software. Also, ensure you have a httpd server configured to run the site, such as Apache2, IIS, or NGINX.

**Commands to install Python libraries**
```
pip3 install flask
pip3 install mysql-connector-python
pip3 install flask_mail
```

**Make sure to modify config.json with the required db and other configurations.**

**If you have the httpd server set up correctly, just having the myexploitscanner.py script (with supporting resources in the same directory) will allow access to the web interface at the configured domain. If you want to run it locally, you can run the following command:**
```
python myexploitscanner.py
```

It will ask you to access the web content at http://127.0.0.1:5000

**How the software works:**

The scheduler should be run using some type of task scheduler service such as Task Scheduler in Windows or CRON in Linux. This scheduler will find scans that need to be processed in the database. It does this by running the scanner app using the appropriate parameters. The scanner will update the appropriate records in the database so the user can see when the results have been completed. The user also makes scan requests from the UI web interface.


### Horizontal Rule


# SQL Documentation

## Stored Procedures
### TABLE: users

**user_create**(VARCHAR(255) email, VARCHAR(255) password, VARCHAR(255) name) 
	*returns user_key*

**user_login**(VARCHAR(255) email, VARCHAR(255) password, VARCHAR(255) name) 
	*returns EITHER user_key OR 0 IF NO USER FOUND*
 
**user_update_email**(INT key, VARCHAR(255) email)
	*no return value*

**user_update_password**(INT key, VARCHAR(255) password)
	*no return value*

**user_update_name**(INT key, VARCHAR(255) name)
	*no return value*

**user_update_status**(INT key, INT status)
	*no return value*

**user_update_active**(INT key, INT active)
	*no return value*

**user_view_bykey**(INT key) 
	*returns user_guid, user_email, user_password, user_name, 
		user_status, user_active*

**user_view_byguid**(VARCHAR(255) guid)
	*returns user_guid, user_email, user_password, user_name, 
		user_status, user_active*

**user_view_bystatus**(INT status)
	*returns user_guid, user_email, user_password, user_name, 
		user_status, user_active*

**user_view_byactive**(INT active)
	*returns user_guid, user_email, user_password, user_name, 
		user_status, user_active*


### TABLE: scans

**scan_create**(INT scantype, VARCHAR(255) uri, INT user_id)
	*returns scan_key*

**scan_update_scantype**(INT key, INT scantype_id)
	*no return value*

**scan_update_uri**(INT key, VARCHAR(255) uri)
	*no return value*

**scan_update_status**(INT key, INT status)
	*no return value*

**scan_update_user_id**(INT key, INT user_id)
	*no return value*

**scan_view_bykey**(INT key)
	*return scan_guid, scan_scantype_id, scan_uri, 
		scan_status, scan_user_id*

**scan_view_byguid**(VARCHAR(255) guid)
	*return scan_key, scan_scantype_id, scan_uri, 
		scan_status, scan_user_id*

**scan_view_bystatus**(INT status)
	*return scan_key, scan_guid, scan_scantype_id, 
		scan_uri, scan_status, scan_user_id,
  		scan_created, scantype_name *

**scan_view_byuserid**(INT user_id)
	*return scan_key, scan_guid, scan_scantype_id, 
		scan_uri, scan_status, scan_user_id*

### TABLE: scantypes

**scantype_view_all**()
	*return scantype_key, scantype_name, scantype_description*

